---
import BlogPostCard from "./BlogPostCard.astro";

interface Props {
  posts: {
    id: string;
    data: {
      title: string;
      date: Date;
      description?: string;
      cover?: string;
    };
  }[];
  currentSlug?: string;
}

const { posts, currentSlug } = Astro.props;

const filtered = posts
  .filter((p) => p.id !== currentSlug)
  .slice(0, 3);
---

{filtered.length > 0 && (
  <section class="mt-16 pt-12 border-t border-app-border">
    <h2 class="text-2xl font-semibold text-app-text mb-8">Other posts</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {filtered.map((post) => (
        <BlogPostCard
          title={post.data.title}
          date={post.data.date}
          description={post.data.description}
          cover={post.data.cover}
          slug={post.id}
        />
      ))}
    </div>
  </section>
)}
