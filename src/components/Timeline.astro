---
import type { Experience } from "../data/about";

interface Props {
  experiences: Experience[];
}

const { experiences } = Astro.props;
---

<div class="relative">
  <!-- Timeline line -->
  <div class="absolute left-6 top-0 bottom-0 w-px bg-app-gray-200 hidden md:block"></div>

  <div class="space-y-8 lg:space-y-10">
    {experiences.map((exp) => (
      <div class="relative md:pl-16">
        <!-- Timeline dot -->
        <div class="absolute left-[19px] top-1 w-3 h-3 rounded-full bg-app-accent border-[3px] border-app-bg hidden md:block"></div>

        <div class="bg-app-surface border border-app-gray-200 rounded-2xl p-5 lg:p-6 transition-all duration-300 hover:shadow-lg">
          <div class="flex items-start gap-4 mb-4">
            {exp.logo && (
              <img
                src={exp.logo}
                alt={exp.company}
                class="w-12 h-12 lg:w-14 lg:h-14 rounded-lg object-contain bg-app-bg p-2 flex-shrink-0"
                loading="lazy"
              />
            )}
            <div class="flex-1">
              <h3 class="text-base lg:text-lg font-display tracking-[var(--tracking-tight)] text-app-text mb-1">
                {exp.link ? (
                  <a href={exp.link} target="_blank" rel="noopener" class="hover:text-app-accent transition-colors">
                    {exp.company}
                  </a>
                ) : (
                  exp.company
                )}
              </h3>
              <p class="text-sm lg:text-base font-medium tracking-[var(--tracking-tight)] text-app-accent mb-1">{exp.role}</p>
              <p class="text-xs lg:text-sm tracking-[var(--tracking-tight)] text-app-gray-400">{exp.tenure}</p>
            </div>
          </div>
          <ul class="space-y-2.5 lg:space-y-3">
            {exp.contributions.map((c) => (
              <li class="text-sm lg:text-base tracking-[var(--tracking-tight)] text-app-gray-500 leading-[1.5] flex gap-2.5">
                <span class="text-app-accent mt-[2px] flex-shrink-0 font-medium">â€¢</span>
                <span>{c}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    ))}
  </div>
</div>
